; =======================================================
; PHP-FPM 主配置文件 (php-fpm.conf)
; 路径: /opt/php/etc/php-fpm.conf
; =======================================================

[global]
; PID 文件路径
pid = /opt/php/var/run/php-fpm.pid

; 错误日志路径
error_log = /opt/php/var/log/php-fpm.log

; 日志级别: alert, error, warning, notice, debug
log_level = warning

; 紧急重启阈值
; 如果在 emergency_restart_interval 内有 emergency_restart_threshold 个子进程
; 以 SIGSEGV 或 SIGBUS 退出，则 PHP-FPM 将优雅重启
emergency_restart_threshold = 10
emergency_restart_interval = 1m

; 进程控制超时
process_control_timeout = 10s

; 最大进程数限制（所有池的总和）
process.max = 128

; 后台运行（Docker 中由 --nodaemonize 覆盖）
daemonize = yes

; 打开文件描述符限制
rlimit_files = 51200

; 引入池配置目录
include = /opt/php/etc/php-fpm.d/*.conf
